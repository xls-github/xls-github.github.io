
---
layout: post
title: 面试题62(剑指offer)--圆圈中最后剩下的数字
date: 2019-08-14 
tag: 剑指offer
---

**题目：**

0，1，...，n-1这n个数字排成一个圆圈，从数字0开始，每次从这个圆圈里删除第m个数字。求出这个圆圈里剩下的最后一个数字。

**解法：** 

```java
	/**
     * 约瑟夫环问题：
     * 长度为n的解可以看作长度为n-1的解加上m之后对n取余
     * 即f(n,m)=(f(n-1,m)+m)%n,
     * f(n-1,m)=(f(n-2,m)+m)%(n-1)
     * @param n
     * @param m
     * @return
     */
    public static int lastRemaining_Solution(int n, int m) {
        if(n<1||m<1){
            return -1;
        }
        int temp=0;
        for (int i = 2; i <=n ; i++) {
            temp=(temp+m)%i;
        }
        return temp;
    }
```

**解释：**

- f(n,m)表示在n个数字中删除第m个数字后留下的数字。

- 在n个数字中，第一个被删除的数字为(m-1)%n，记为k，剩余n-1个数字为0,1,2,...**k-1,k+1**,...n-1。

- 由于下一次删除时从k+1开始，与0~n-1连续序列不同，则记为p((n-1),m),那么必有f(n,m)=p((n-1),m)。

- 由于第二次删除从k+1开始，k+1相当于第一次数字时的0，则存在下列映射：

  | 映射前 | 映射后 |
  | :----: | :----: |
  |  k+1   |   0    |
  |  ...   |  ...   |
  |   0    | n-k-1  |
  |  ...   |  ...   |
  |  k-1   |  n-2   |

  

则映射函数为g(x)=(x-k-1)%n,其逆映射为g`(x)=(x+k+1)%n。

- 映射后序列也为0~n-2，可以用f((n-1),m)表示。

|   映射前   |     映射后     |
| :--------: | :------------: |
| p((n-1),m) |   f((n-1),m)   |
|     x      | g(x)=(x+k+1)%n |

- 则p((n-1),m)=(f((n-1),m)+k+1)%n,由于k=(m-1)%n,代入公式可得f(n,m)=(f(n-1,m)+m)%n。